/*! colossus Version : 1.0.0 
 * Build date: 21-04-2016
 */
angular.module("game",[]),angular.module("game").controller("GameController",["$scope","$log","PoolsService",function(a,b,c){function d(a){var d=c.getPoolsData(a);d.then(function(a){b.info(a),e.poolsData=a.data},function(a){b.error("Failure: "+a)})}var e=this;e.poolsData,e.categoryOnDisplay,e.poolOnDisplay,e.legOnDisplay,e.setGroup=function(a){return e.categoryOnDisplay=a},d("https://colossusdevtest.herokuapp.com/api/pools.json"),e.getPool=function(a){var d=c.getPool("https://colossusdevtest.herokuapp.com/api/pools/"+a+".json");d.then(function(a){console.log(a.data),e.poolOnDisplay=a.data},function(a){b.error("Failure: "+a)})},e.setLeg=function(a){e.legOnDisplay=a};var f=function(a){var b=1;for(leg in a)b*=a[leg].length;return e.lineTotal=b};e.betSelections={},e.lineTotal=1,e.stakes=[2,1,.5,.2],e.betTotal=0,e.addSelection=function(a){e.betSelections.hasOwnProperty("leg"+e.legOnDisplay.leg_order)?(b.info("Already has leg"+e.legOnDisplay.leg_order),b.info("Adding selection to that array...."),e.betSelections["leg"+e.legOnDisplay.leg_order].push(a),b.info("complete"),f(e.betSelections)):(e.betSelections["leg"+e.legOnDisplay.leg_order]=[],e.betSelections["leg"+e.legOnDisplay.leg_order].push(a),f(e.betSelections))},e.addStake=function(a){e.betTotal=e.betTotal+a},e.placeBet=function(){function a(a){var b=[];for(leg in a)a[leg].forEach(function(a){b.push(a.id)});return b}var d={lineTotal:e.lineTotal,betTotal:e.betTotal,selectionIds:a(e.betSelections)},f=c.placeBet("https://colossusdevtest.herokuapp.com/api/tickets.json",d);f.then(function(a){b.info(a)},function(a){b.error("Failure: "+a)})}}]),angular.module("game").service("PoolsService",["$http","$log",function(a){var b=function(a){return console.log("request completed successfully"),a},c=function(a){$log.error(a)};this.getPoolsData=function(d){return a.get(d).then(b,c)},this.getPool=function(d){return a.get(d).then(b,c)},this.placeBet=function(d,e){return a.get(d,e).then(b,c)}}]);